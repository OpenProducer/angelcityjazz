(()=>{"use strict";var e,t={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(t),(e=window.newspackReaderActivation)&&[...document.querySelectorAll(".newspack-reader-registration")].forEach((t=>{const a=t.querySelector("form");if(!a)return;const n=t.querySelector(".newspack-newsletters-registration-response"),r=a.querySelector('input[type="submit"]');e.on("reader",(e=>{let{detail:{email:t}}=e;t&&(a.style.display="none")})),a.addEventListener("submit",(o=>{o.preventDefault();const s=new FormData(a);s.has("email")&&s.get("email")&&(r.disabled=!0,n.innerHTML="",fetch(a.getAttribute("action")||window.location.pathname,{method:"POST",headers:{Accept:"application/json"},body:s}).then((o=>{r.disabled=!1,o.json().then((r=>{let{message:s,data:i}=r;const l=document.createElement("p");l.innerHTML=s,l.className=`message status-${o.status}`,200===o.status?(t.replaceChild(l,a),null!=i&&i.email&&e.setReader(i.email)):n.appendChild(l)}))})))}))}));var a=window;for(var n in t)a[n]=t[n];t.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();