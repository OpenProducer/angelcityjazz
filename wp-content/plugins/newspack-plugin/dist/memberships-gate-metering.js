(()=>{var e={};const t="newspack_metering",n=newspack_metering_settings,o=window.localStorage;!function(){const e=function(){const e=function(){const e=new Date;switch(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),n.period){case"day":e.setDate(e.getDate()+1);break;case"week":const t=6-e.getDay();e.setDate(e.getDate()+t);break;case"month":e.setMonth(e.getMonth()+1),e.setDate(1)}return parseInt(e.getTime()/1e3,10)}(),r=JSON.parse(o.getItem(t))||{content:[],expiration:e};return r.expiration=parseInt(r.expiration,10)||0,r.expiration!==e&&(r.expiration<e&&(r.content=[]),r.expiration=e),o.setItem(t,JSON.stringify(r)),r}();let r=!1;n.count<=e.content.length&&!e.content.includes(n.post_id)?(!function(){const e=document.querySelector(".entry-content");if(!e)return;const t=n.visible_paragraphs,o=document.querySelectorAll(".entry-content > *"),r=e.innerHTML.indexOf("\x3c!--more--\x3e"),s=document.querySelector(".newspack-memberships__inline-gate");if(r>-1&&n.use_more_tag)e.innerHTML=e.innerHTML.substring(0,r);else{let n=0;o.forEach((o=>{"P"===o.tagName&&n++,n>t&&e.removeChild(o)}))}s&&e.appendChild(s)}(),r=!0):document.querySelectorAll(".newspack-memberships__gate").forEach((e=>{e.parentNode.removeChild(e)})),r||e.content.includes(n.post_id)||(e.content.push(n.post_id),o.setItem(t,JSON.stringify(e)))}();var r=window;for(var s in e)r[s]=e[s];e.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();